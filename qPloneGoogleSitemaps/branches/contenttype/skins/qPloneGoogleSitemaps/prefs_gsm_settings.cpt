<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      lang="en-US"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="qPloneGoogleSitemaps">
<body>
    <div metal:fill-slot="prefs_configlet_main"
        tal:define="errors python:request.get('errors', {})">

        <div class="documentEditable">
            <ul class="contentViews">
                <li class="">
                    <a href=""
                       tal:attributes="href string: prefs_gsm_overview">
                       Overview</a>
                </li>
                <li class="">
                    <a href=""
                       tal:attributes="href string:prefs_gsm_verification">
                       Verification</a>
                </li>
                <li class="selected">
                <a href=""
                   tal:attributes="href string:${template/id}">
                   Settings</a>
                </li>
            </ul>
            <div class="contentActions">
            &nbsp;
            </div>
            <div class="documentContent">
                <h1 i18n:translate="heading_plonegooglesitemaps">Plone Google Sitemaps</h1>
                <a href=""
                   class="link-parent"
                   tal:attributes="href string: $portal_url/plone_control_panel"
                   i18n:translate="label_up_to_plone_setup">
                   Up to Plone Setup
                </a>

                

                <form name="edit_form"
                    action="."
                    method="post"
                    enctype="multipart/form-data"
                    tal:attributes="action string:${here_url}/${template/getId}" >

                <fieldset tal:define="view here/@@sitemap_settings;
                                      sitemaps here/@@sitemap_settings/sitemaps;
                                      sitemap_types here/@@sitemap_settings/sitemapsKeys;">
                    <legend i18n:translate="legend_plonesitemap_configuration_details">
                        Google SiteMaps configuration
                    </legend>

                    <p> To <strong>add new sitemap</strong> - simple use
                    appropriate button at the bottom of the page.</p>
                    <tal:block condition="sitemaps">
                    <p>You can <strong>edit</strong> only <strong>default</strong>
                    sitemap with <strong>edit</strong> link.</p>
                    <p> To <strong>delete</strong> sitemap - select the appropriate sitemap's type and the sitemap id from 
                    available selection list (any one can be selected), use appropriate button.</p>
                    <p>You can <strong>set default</strong> sitemap: select sitemap type and desired id and use <strong>set default</strong> button.</p>
                    <p>You can <strong>Ping</strong> desired sitemap: select sitemap type and push <strong>Ping</strong> button.</p>
                    </tal:block>

                    <table class="listing"
                           summary="Sitemaps management"
                           i18n:attributes="summary summary_sitemaps_management;"
                           tal:condition="sitemaps">
                        <thead>
                            <tr>
                            <th></th>
                            <th>Type</th>
                            <th>Default Sitemap Id</th>
                            <th>Edit Sitemap</th>
                            <th>Size (bytes)</th>
                            <th>Entries</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tal:items tal:repeat="item sitemap_types">
                            <tr tal:define="oddrow repeat/item/odd;
                                            data python:view.getSMDataByType(item)"
                                tal:attributes="class python:test(oddrow, 'even', 'odd')" >
                                <td>
                                <input type="checkbox" class="noborder"
                                        name="smtypes:list" id="#" value="#" tabindex=""
                                        tal:attributes="value    item;
                                                        id       string:cb_$item;
                                                        alt      data/smtype_title;
                                                        title    data/smtype_title;
                                                        tabindex tabindex/next;" />
                                </td>
                                <td>
                                <strong tal:content="data/smtype_title"> Sitemap type </strong>
                                </td>
                                <td>
                                    <select name="defaultSM" id="portalTypes" tabindex="0"
                                            tal:attributes="name string:defaultSM_$item;
                                                            tabindex tabindex/next;">
                                        <tal:loop tal:repeat="opt data/sm_list">
                                        <option value="ATBooleanCriterion"
                                                tal:content="python:opt[0]"
                                                tal:attributes="value python:opt[1];
                                                                selected python:test(opt[2],'selected', None)">Sitemap item</option>
                                        </tal:loop>
                                    </select>
                                </td>
                                <td>
                                <a alt="" title="" href="http://"
                                    tal:condition="data/sm_def_id"
                                    tal:attributes="href data/sm_def_editurl;
                                                    title data/sm_def_id;
                                                    alt string:Edit ${data/sm_def_id}"
                                    tal:content="string:Edit ${data/sm_def_id}">Edit default sitemap type </a>
                                </td>
                                <td tal:content="string:${data/sm_def_size}"> 10 000 in bytes
                                </td>
                                <td tal:content="string:${data/sm_def_entries}"> 50 000 items
                                </td>
                            </tr>
                            </tal:items>
                            <tr>
                            <th colspan="4"><strong>Limitations:</strong></th>
                            <th><strong>10,485,760</strong></th>
                            <th><strong>50,000</strong></th>
                            </tr>
                        </tbody>
                        </table>

                        <div class="formControls"
                            tal:define="process_creation request/process_creation|nothing;"
                            i18n:domain="plone">
                            <input class="context"
                                tabindex=""
                                type="submit"
                                name="form.button.Add"
                                value="Add New Sitemap"
                                i18n:attributes="value"
                                tal:attributes="tabindex tabindex/next;" />
                            <tal:block condition="sitemaps">
                            <input class="context"
                                tabindex=""
                                type="submit"
                                name="form.button.Delete"
                                value="Delete"
                                i18n:attributes="value"
                                tal:attributes="tabindex tabindex/next;" />
                            <input class="context"
                                tabindex=""
                                type="submit"
                                name="form.button.Default"
                                value="Set default"
                                i18n:attributes="value"
                                tal:attributes="tabindex tabindex/next;" />
                            <input class="context"
                                tabindex=""
                                type="submit"
                                name="form.button.Ping"
                                value="Ping"
                                i18n:attributes="value"
                                tal:attributes="tabindex tabindex/next;" />
                            </tal:block>
                        </div>

                    </fieldset>
                    <input type="hidden" name="form.submitted" value="1" />
                </form>
            </div>
        </div>
    </div>
</body>
</html>